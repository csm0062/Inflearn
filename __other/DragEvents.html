<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag Events Example</title>
    <link rel="stylesheet" href="../css/_01_the_hostel.css">
    <style>
        /* bodyëŠ” ì „ì²´ í™”ë©´ì—ì„œ flexboxë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ì•™ì— ë°°ì¹˜ */
        

        /* ì•„ì´í…œ ì¡´ì„ ì¤‘ì•™ ìœ„ìª½ì— ë°°ì¹˜í•˜ëŠ” ì»¨í…Œì´ë„ˆ */
        .itemzone-container {
            position: absolute;
            top: 20px;  /* í™”ë©´ ìœ„ì—ì„œ 20px ì•„ë˜ì— ë°°ì¹˜ */
            width: 100%;
            display: flex;
            justify-content: center;
            background-color: white;  /* ë°°ê²½ìƒ‰ì„ í•‘í¬ë¡œ ì„¤ì • */
            opacity: 50%;
            padding: 20px;  /* íŒ¨ë”© 20px */
            box-sizing: border-box;  /* íŒ¨ë”© í¬í•¨í•œ ë„ˆë¹„ ê³„ì‚° */
        }

        /* ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
        .draggable {
            width: 100px;  /* ìš”ì†Œ ë„ˆë¹„ */
            height: 100px;  /* ìš”ì†Œ ë†’ì´ */
            background-color: lightblue;  /* ë°°ê²½ ìƒ‰ìƒ */
            text-align: center;  /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
            line-height: 100px;  /* í…ìŠ¤íŠ¸ ìˆ˜ì§ ì •ë ¬ */
            margin: 20px;  /* ì™¸ë¶€ ì—¬ë°± */
            cursor: grab;  /* ì»¤ì„œ ëª¨ì–‘ ë³€ê²½ */
        }

        /* ë“œë¡­ ê°€ëŠ¥í•œ ì˜ì—­ì„ í™”ë©´ ì¤‘ì•™ì— ë°°ì¹˜í•˜ëŠ” ì»¨í…Œì´ë„ˆ */
        .dropzone-container {
            position: absolute;
            top: 50%;  /* í™”ë©´ì˜ 50% ì§€ì ì— ë°°ì¹˜ */
            left: 50%;  /* í™”ë©´ì˜ 50% ì§€ì ì— ë°°ì¹˜ */
            transform: translate(-50%, -50%);  /* ì •í™•íˆ ì¤‘ì•™ì— ë°°ì¹˜ë˜ë„ë¡ ì¡°ì • */
            display: flex;
            justify-content: center;
            padding: 20px;  /* íŒ¨ë”© 20px */
            background-color: lightgray;  /* ë°°ê²½ìƒ‰ì„ ë¼ì´íŠ¸ê·¸ë ˆì´ë¡œ ì„¤ì • */
            box-sizing: border-box;  /* íŒ¨ë”© í¬í•¨í•œ ë„ˆë¹„ ê³„ì‚° */
            width: 800px;  /* ê³ ì • ë„ˆë¹„ */
        }

        /* ë“œë¡­ ê°€ëŠ¥í•œ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .dropzone {
            width: 200px;  /* ì˜ì—­ ë„ˆë¹„ */
            height: 200px;  /* ì˜ì—­ ë†’ì´ */
            background-color: white;  /* ë°°ê²½ ìƒ‰ìƒ */
            text-align: center;  /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
            line-height: 200px;  /* í…ìŠ¤íŠ¸ ìˆ˜ì§ ì •ë ¬ */
            margin: 10px;  /* ì™¸ë¶€ ì—¬ë°± */
            border: 2px dashed #aaa;  /* ì ì„  í…Œë‘ë¦¬ */
            position: relative;  /* ìƒëŒ€ì  ìœ„ì¹˜ ì„¤ì • */
        }
    </style>
</head>
<body>
  <div id="overlay-top"></div>
    <div id="game-container">
      
        <img id="stage-image" src="../image/images/stage/ë¬´ëŒ€ë°°ê²½.JPG" alt="Stage" style="width: 100%; height: 100%;">
        <button id="left-button" class="nav-button" onclick="location.href='_03_right_wall.html'">&lt;</button>
        <button id="right-button" class="nav-button" onclick="location.href='_05_left_wall.html'">&gt;</button>

        <div class="itemzone-container" id="item-zone">
          <!-- ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì•„ì´í…œë“¤ -->
          <div id="draggable1" class="draggable" draggable="true" data-id="1">Item 1</div>
          <div id="draggable2" class="draggable" draggable="true" data-id="2">Item 2</div>
          <div id="draggable3" class="draggable" draggable="true" data-id="3">Item 3</div>
          <div id="draggable4" class="draggable" draggable="true" data-id="4">Item 4</div>
        </div>
  
        <div class="dropzone-container" id="dropzone-container">
            <!-- ë“œë¡­ ê°€ëŠ¥í•œ ì˜ì—­ë“¤ -->
            <div id="dropzone1" class="dropzone" data-id="1">Zone 1</div>
            <div id="dropzone2" class="dropzone" data-id="2">Zone 2</div>
            <div id="dropzone3" class="dropzone" data-id="3">Zone 3</div>
            <div id="dropzone4" class="dropzone" data-id="4">Zone 4</div>
        </div>
        <!-- ì•„ì´í…œ ë²„íŠ¼ ì¶”ê°€ -->
        <!-- <button type="button" class="btn btn-primary-item" id="button-item" data-bs-toggle="modal" data-bs-target="#intro">ğŸ’¼</button> -->
        <button type="button" class="btn btn-primary-item" id="button-item" onclick="goToInventory()">ğŸ’¼</button>
    </div>
    <div id="overlay-bottom"></div>
    <div class="shadow-overlay"></div>

    <!-- ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ë“±ì„ ë¶ˆëŸ¬ì˜¤ê¸° -->

    <script src="../js/_04_stage.js"></script>
    <script src="../js/inventory.js"></script>
    

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            // ëª¨ë“  ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìš”ì†Œ ì„ íƒ
            const draggables = document.querySelectorAll('.draggable');
            // ëª¨ë“  ë“œë¡­ ê°€ëŠ¥í•œ ì˜ì—­ ì„ íƒ
            const dropzones = document.querySelectorAll('.dropzone');
            // ì•„ì´í…œ ì¡´ ì„ íƒ
            const itemZone = document.getElementById('item-zone');

            // ë“œë˜ê·¸ ê°€ëŠ¥í•œ ê° ìš”ì†Œì— ëŒ€í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (event) => {
                    // ë“œë˜ê·¸ê°€ ì‹œì‘ë  ë•Œ ìš”ì†Œì˜ data-id ê°’ì„ dataTransferì— ì €ì¥
                    event.dataTransfer.setData('text/plain', event.target.dataset.id);
                    event.dataTransfer.effectAllowed = 'move';  // ë“œë˜ê·¸ íš¨ê³¼ ì„¤ì •
                });
            });

            // ë“œë¡­ ê°€ëŠ¥í•œ ê° ì˜ì—­ì— ëŒ€í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            dropzones.forEach(dropzone => {
                dropzone.addEventListener('dragover', (event) => {
                    event.preventDefault();  // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                    event.dataTransfer.dropEffect = 'move';  // ë“œë¡­ íš¨ê³¼ ì„¤ì •
                });

                dropzone.addEventListener('drop', (event) => {
                    event.preventDefault();  // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                    // ë“œë˜ê·¸ëœ ìš”ì†Œì˜ data-id ê°€ì ¸ì˜¤ê¸°
                    const draggedId = event.dataTransfer.getData('text/plain');
                    // ë“œë¡­ëœ ì˜ì—­ì˜ data-id ê°€ì ¸ì˜¤ê¸°
                    const dropzoneId = event.target.dataset.id;

                    // ë“œë˜ê·¸ëœ ìš”ì†Œì™€ ë“œë¡­ëœ ì˜ì—­ì˜ IDê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
                    if (draggedId === dropzoneId) {
                        // ì¼ì¹˜í•˜ë©´ ë“œë˜ê·¸ëœ ìš”ì†Œë¥¼ ë“œë¡­ ì˜ì—­ì— ì¶”ê°€
                        const draggedElement = document.querySelector(`[data-id='${draggedId}']`);
                        dropzone.appendChild(draggedElement);
                        // ë“œë˜ê·¸ëœ ìš”ì†Œë¥¼ ë“œë¡­ ì˜ì—­ì˜ ì¤‘ì•™ì— ë°°ì¹˜
                        draggedElement.style.position = 'absolute';
                        draggedElement.style.top = '50%';
                        draggedElement.style.left = '50%';
                        draggedElement.style.transform = 'translate(-50%, -50%)';
                    } else {
                        // ì¼ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ê²½ê³  ë©”ì‹œì§€ í‘œì‹œ
                        alert('ì—¬ê¸°ê°€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤...');
                    }
                });
            });

            // ì•„ì´í…œ ì¡´ì—ë„ ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
            itemZone.addEventListener('dragover', (event) => {
                event.preventDefault();  // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                event.dataTransfer.dropEffect = 'move';  // ë“œë¡­ íš¨ê³¼ ì„¤ì •
            });

            itemZone.addEventListener('drop', (event) => {
                event.preventDefault();  // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                // ë“œë˜ê·¸ëœ ìš”ì†Œì˜ data-id ê°€ì ¸ì˜¤ê¸°
                const draggedId = event.dataTransfer.getData('text/plain');
                // ë“œë˜ê·¸ëœ ìš”ì†Œë¥¼ ì•„ì´í…œ ì¡´ìœ¼ë¡œ ë‹¤ì‹œ ì´ë™
                const draggedElement = document.querySelector(`[data-id='${draggedId}']`);
                itemZone.appendChild(draggedElement);
                // ë“œë˜ê·¸ëœ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
                draggedElement.style.position = 'relative';
                draggedElement.style.top = 'auto';
                draggedElement.style.left = 'auto';
                draggedElement.style.transform = 'none';
            });
        });
    </script>
</body>
</html>
